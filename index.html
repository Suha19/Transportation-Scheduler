<!DOCTYPE html>
<html lang="en-us">

<head>

    <meta charset="UTF-8">
    <title>Airport database</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap File -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- css -->
    <!-- <link rel="stylesheet" type="text/css" href="./assets/css/style.css"> -->

</head>

<body>
        <div class="container">
                <div class="row">
                  <div class="col-sm" ><h3> Flight name</h3><h6 id="name-display"> </h6></div>
                  <div class="col-sm" ><h3>Destination</h3><h6 id="destination-display"></h6></div>
                  <div class="col-sm" ><h3>First Flight</h3><h6 id="first-flight-display"></h6></div>
                  <div class="col-sm" ><h3>Next Flight</h3><h6 id="next-flight-display"></h6></div>
                  <div class="col-sm" ><h3>Frequency Display</h3><h6 id="frequency-display"></h6></div>
                </div>
              </div>
              
        
    <div class="container">
        <br>
        <div class="row">
            <div class="col-lg-6">
                <div class="card card-default">
                    <div class="card-header">
                        Add Flight
                    </div>
                    <div class="card-body">

                        <form role="form">
                            <div class="form-group row">
                                <label for="name-input">flight Name</label>
                                <input class="form-control" id="name-input" type="text">
                            </div>
                            <div class="form-group row">
                                <label for="destination-input">Destination</label>
                                <input class="form-control" id="destination-input" type="text">
                            </div>
                            <div class="form-group row">
                                <label for="first-flight-input">First flight Time(HH:mm-military time)</label>
                                <input class="form-control" id="first-flight-input" type="time">
                            </div>
                            <div class="form-group row">
                                    <label for="next-flight-input">Next flight Time(HH:mm-military time)</label>
                                    <input class="form-control" id="next-flight-input" type="time">
                                </div>
                            <div class="form-group row">
                                <label for="frequency-input">Frequency(min)</label>
                                <input class="form-control" id="frequency-input" type="time">
                            </div>
                            <button class="btn btn-default" id="add-flight" type="submit">Submit</button>
                        </form>
                    </div>
                </div>
            </div>

            <script src="https://www.gstatic.com/firebasejs/5.9.3/firebase.js"></script>
            <!-- Script -->
            <script>
                // Initialize Firebase and change the values of the config values with your own Firebase config values.
                var config = {
                    apiKey: "AIzaSyB2ijP05RlCgJhIIfgGoMALaGim0LZzRAQ",
                    authDomain: "transportation-scheduler-abe4d.firebaseapp.com",
                    databaseURL: "https://transportation-scheduler-abe4d.firebaseio.com",
                    projectId: "transportation-scheduler-abe4d",
                    storageBucket: "transportation-scheduler-abe4d.appspot.com",
                    messagingSenderId: "482302185278"
                };

                firebase.initializeApp(config);

                // Create a variable to reference the database
                var database = firebase.database();

                var name = "";
                var destination = "";
                var firstFlight = "";
                var nextFlight = "";
                var frequency = "";

                $("#add-flight").on("click", function (event) {
                    event.preventDefault();

                    name = $("#name-input").val().trim();
                    destination = $("#destination-input").val().trim();
                    firstFlight = $("#first-flight-input").val().trim();
                    nextFlight = $("#next-flight-input").val().trim();
                    frequency = $("#frequency-input").val().trim();
                
                    database.ref().push({
                        name: name,
                        destination: destination,
                        firstFlight: firstFlight,
                        nextFlight: nextFlight,
                        frequency: frequency
                    });
                });

                database.ref().on("child_added", function (childSnapshot) {
                    console.log(childSnapshot.val());

                    console.log(childSnapshot.val().name);
                    console.log(childSnapshot.val().destination);
                    console.log(childSnapshot.val().firstFlight);
                    console.log(childSnapshot.val().nextFlight);
                    console.log(childSnapshot.val().frequency);

                    $("#name-display").text(childSnapshot.val().name);
                    $("#destination-display").text(childSnapshot.val().destination);
                    $("#first-flight-display").text(childSnapshot.val().firstFlight);
                    $("#next-flight-display").text(childSnapshot.val().nextFlight);
                    $("#frequency-display").text(childSnapshot.val().frequency);

                }, function (errorObject) {
                    console.log("The read failed: " + errorObject.code);
                });
            </script>

</body>

</html>